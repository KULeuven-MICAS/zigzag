<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link link rel=icon  href="zigzag_logo_white_32x32.svg" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ZigZag - Deep Learning Hardware Design Space Exploration: ONNXModelParser Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ZigZag - Deep Learning Hardware Design Space Exploration
   </div>
   <div id="projectbrief">This repository presents the novel version of our tried-and-tested hardware Architecture-Mapping Design Space Exploration (DSE) Framework for Deep Learning (DL) accelerators. ZigZag bridges the gap between algorithmic DL decisions and their acceleration cost on specialized accelerators through a fast and accurate hardware cost estimation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ONNXModelParser Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Parses the ONNX model into a workload.  
 <a href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a07d50f099181b9433f7416c6bff14fb1"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#a07d50f099181b9433f7416c6bff14fb1">__init__</a> (self, str|ModelProto <a class="el" href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#a11ca96dc836ddb84fb694554c9e06bf6">onnx_model</a>, str <a class="el" href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#a7245ae2f7117f5d1a160de224089d881">mapping_yaml_path</a>)</td></tr>
<tr class="separator:a07d50f099181b9433f7416c6bff14fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada2ad33b3a3b364f30e0f5d7d5201d73"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classzigzag_1_1workload_1_1ONNXWorkload_1_1ONNXWorkload.html">ONNXWorkload</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#ada2ad33b3a3b364f30e0f5d7d5201d73">run</a> (self)</td></tr>
<tr class="memdesc:ada2ad33b3a3b364f30e0f5d7d5201d73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate through the onnx model and generate the workload consisting of LayerNodes and DummyNodes.  <a href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#ada2ad33b3a3b364f30e0f5d7d5201d73">More...</a><br /></td></tr>
<tr class="separator:ada2ad33b3a3b364f30e0f5d7d5201d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade99e4499eaf6da42cc6e1cfab009081"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#ade99e4499eaf6da42cc6e1cfab009081">parse_workload_from_onnx_model_and_mapping</a> (self)</td></tr>
<tr class="memdesc:ade99e4499eaf6da42cc6e1cfab009081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an onnx model into a workload object.  <a href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#ade99e4499eaf6da42cc6e1cfab009081">More...</a><br /></td></tr>
<tr class="separator:ade99e4499eaf6da42cc6e1cfab009081"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a11ca96dc836ddb84fb694554c9e06bf6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#a11ca96dc836ddb84fb694554c9e06bf6">onnx_model</a></td></tr>
<tr class="separator:a11ca96dc836ddb84fb694554c9e06bf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5f1d395e50b6a04e0052c6c9125b897"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#af5f1d395e50b6a04e0052c6c9125b897">workload</a></td></tr>
<tr class="separator:af5f1d395e50b6a04e0052c6c9125b897"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7245ae2f7117f5d1a160de224089d881"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#a7245ae2f7117f5d1a160de224089d881">mapping_yaml_path</a></td></tr>
<tr class="separator:a7245ae2f7117f5d1a160de224089d881"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f954a739989f453e42fa97cb171c657"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html#a3f954a739989f453e42fa97cb171c657">mapping_data</a></td></tr>
<tr class="separator:a3f954a739989f453e42fa97cb171c657"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Parses the ONNX model into a workload. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a07d50f099181b9433f7416c6bff14fb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07d50f099181b9433f7416c6bff14fb1">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None __init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str | ModelProto&#160;</td>
          <td class="paramname"><em>onnx_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>mapping_yaml_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_a07d50f099181b9433f7416c6bff14fb1_cgraph.png" border="0" usemap="#aclasszigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_a07d50f099181b9433f7416c6bff14fb1_cgraph" alt=""/></div>
<map name="aclasszigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_a07d50f099181b9433f7416c6bff14fb1_cgraph" id="aclasszigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_a07d50f099181b9433f7416c6bff14fb1_cgraph">
<area shape="rect" title=" " alt="" coords="5,13,76,39"/>
<area shape="rect" href="namespacezigzag_1_1parser_1_1onnx_1_1utils.html#a35cfc1e6036daf70a3bc413dff5d4252" title=" " alt="" coords="124,5,340,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ade99e4499eaf6da42cc6e1cfab009081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade99e4499eaf6da42cc6e1cfab009081">&#9670;&nbsp;</a></span>parse_workload_from_onnx_model_and_mapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parse_workload_from_onnx_model_and_mapping </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts an onnx model into a workload object. </p>
<p>We scan the model for all convolutional layers, and setup a Layer object for each of those using the mapping. Then we combine the layers into a workload graph.</p>
<p>If the model isn't in the format with external data, it will be slow to manipulate it, so better to work with raw models with external data. The line below accomplishes this. onnx.save_model(model, 'model_external.onnx', save_as_external_data=True, all_tensors_to_one_file=True, location='model_external_raw_data', size_threshold=1024, convert_attribute=False)</p>
<p>In the future, assume we will have a model saved with external data, then we have to execute the code below if the model isn't inferred yet</p>
<p>This approach is faster for large models because the raw model is used (w/o the external data) if model is not inferred: onnx.shape_inference.infer_shapes_path('path/to/the/model.onnx') # This will save the inferred model to the same file model = onnx.load('path/to/the/model.onnx') # reload the inferred model</p>
<p>Saves for each node_id the inputs and outputs tensor names </p>

</div>
</div>
<a id="ada2ad33b3a3b364f30e0f5d7d5201d73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada2ad33b3a3b364f30e0f5d7d5201d73">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> <a class="el" href="classzigzag_1_1workload_1_1ONNXWorkload_1_1ONNXWorkload.html">ONNXWorkload</a> run </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterate through the onnx model and generate the workload consisting of LayerNodes and DummyNodes. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_ada2ad33b3a3b364f30e0f5d7d5201d73_cgraph.png" border="0" usemap="#aclasszigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_ada2ad33b3a3b364f30e0f5d7d5201d73_cgraph" alt=""/></div>
<map name="aclasszigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_ada2ad33b3a3b364f30e0f5d7d5201d73_cgraph" id="aclasszigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_ada2ad33b3a3b364f30e0f5d7d5201d73_cgraph">
<area shape="rect" title="Iterate through the onnx model and generate the workload consisting of LayerNodes and DummyNodes." alt="" coords="5,78,48,105"/>
<area shape="rect" href="namespacezigzag_1_1parser_1_1onnx_1_1utils.html#a0bd28035f9bc4d1d49cf4a377ad5a363" title="Modifies the given onnx model if there&#39;s dynamic behavior in terms of an &#39;If&#39; operator." alt="" coords="96,71,312,112"/>
<area shape="rect" href="namespacezigzag_1_1parser_1_1onnx_1_1utils.html#a569df09dc4dcf3ca88e8de7e4ba2e64b" title=" " alt="" coords="367,5,571,47"/>
<area shape="rect" href="namespacezigzag_1_1parser_1_1onnx_1_1utils.html#ac23bed465324e72740dd9df90e7199e2" title=" " alt="" coords="373,71,564,112"/>
<area shape="rect" href="namespacezigzag_1_1parser_1_1onnx_1_1utils.html#a73398870af206b5ed0eb819e4babef61" title=" " alt="" coords="360,136,577,177"/>
<area shape="rect" href="namespacezigzag_1_1parser_1_1onnx_1_1utils.html#aae25a24a9696b760b61d38483cdac49f" title=" " alt="" coords="625,5,829,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_ada2ad33b3a3b364f30e0f5d7d5201d73_icgraph.png" border="0" usemap="#aclasszigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_ada2ad33b3a3b364f30e0f5d7d5201d73_icgraph" alt=""/></div>
<map name="aclasszigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_ada2ad33b3a3b364f30e0f5d7d5201d73_icgraph" id="aclasszigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser_ada2ad33b3a3b364f30e0f5d7d5201d73_icgraph">
<area shape="rect" title="Iterate through the onnx model and generate the workload consisting of LayerNodes and DummyNodes." alt="" coords="251,13,293,39"/>
<area shape="rect" href="classzigzag_1_1stages_1_1Stage_1_1Stage.html#a45163c19b7c87f553c6f1d055d4668cb" title=" " alt="" coords="5,5,203,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a3f954a739989f453e42fa97cb171c657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f954a739989f453e42fa97cb171c657">&#9670;&nbsp;</a></span>mapping_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mapping_data</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7245ae2f7117f5d1a160de224089d881"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7245ae2f7117f5d1a160de224089d881">&#9670;&nbsp;</a></span>mapping_yaml_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mapping_yaml_path</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a11ca96dc836ddb84fb694554c9e06bf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11ca96dc836ddb84fb694554c9e06bf6">&#9670;&nbsp;</a></span>onnx_model</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">onnx_model</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af5f1d395e50b6a04e0052c6c9125b897"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5f1d395e50b6a04e0052c6c9125b897">&#9670;&nbsp;</a></span>workload</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">workload</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/runner/work/zigzag/zigzag/zigzag/parser/onnx/<a class="el" href="ONNXModelParser_8py.html">ONNXModelParser.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacezigzag.html">zigzag</a></li><li class="navelem"><a class="el" href="namespacezigzag_1_1parser.html">parser</a></li><li class="navelem"><a class="el" href="namespacezigzag_1_1parser_1_1onnx.html">onnx</a></li><li class="navelem"><a class="el" href="namespacezigzag_1_1parser_1_1onnx_1_1ONNXModelParser.html">ONNXModelParser</a></li><li class="navelem"><a class="el" href="classzigzag_1_1parser_1_1onnx_1_1ONNXModelParser_1_1ONNXModelParser.html">ONNXModelParser</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
